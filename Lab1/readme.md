# Лабораторная работа №1
## Проектирование адресного пространства

### Цель:
1. Собрать топологию CLOS, как на схеме;
2. Распределить адресное пространство для Underlay сети;
3. Зафиксировать в документации план работ, адресное пространство, схему сети, настройки.

![Целевая схема сети](./img/stand-22636-d9822e.avif)
 
### Выполнение

На стенде создана топология CLOS, включающая 5 коммутаторов Arista vEOS. Коммутаторы S1 и S2 выполняют роль Spine, коммутаторы L1, L2, L3 выполняют роль Leaf. К Leaf коммутаторам подключены узлы VPC, имитирующие клиентские сервисы.
Итоговая схема сети приведена на рисунке ниже.
![Схема сети](./img/topology_lab1.png)

Поскольку для планирования адресного пространства никаких исходных данных и ограничений в задании не указано, предположим следующее:

Планируем ЦОД для филиала большой компании АО "Нефтегазалмазколбасазолотодобыча".
Предполагаем, что в перспективе размер данного ЦОД не превысит 32 Leaf коммутатора и 16 Spine. 
Для построения Underlay сети из общего адресного пространства компании выделяется подсеть 10.22.32.0/21.
Сервисы компании живут в отдельном адресном пространстве в диапазоне адресов 172.22.0.0/16

Подсеть 10.22.32.0/22 планируем использовать для адресации P2P линков между Spine и Leaf коммутаторами. 10 бит для адресации хостов в данной подсети планируем использовать следующим образом:

**ssss.lllllх**

где **s** и **l** кодируют номер Spine и Leaf коммутатора, **х** имеет значение 0 на стороне Spine и 1 на стороне Leaf.
Подсеть **10.22.36.0/24** планируем использовать для адресации Loopback адресов Spine коммутаторов.
Подсеть **10.22.37.0/24** планируем использовать для адресации Loopback адресов Leaf коммутаторов.
Подсеть **10.22.38.0/23** - резерв. 

Полное итоговое распределение адресного пространства приведено в файле IP_planing_tool_v1.xlsx в папке проекта.
Адресация для актуальных устройств на стенде приведена в таблицах ниже.

Адресация P2P интерфейсов:

| P2P |	S1 | S2 | S3 |
|---|----|---|---|
| L1 | 10.22.32.0/31 | 10.22.32.2/31 | 10.22.32.4/31 |
| L2 | 10.22.32.64/31 | 10.22.32.66/31 | 10.22.32.68/31 |

Адресация Loopback интерфейсов:

|  Spine |	S1 | S2 | S3 |
|-------------|---------------|---------------|------------|
| loopback |	10.22.37.1/32 | 10.22.37.2/32 | 10.22.37.3/32 |

|  Leaf |	L1 | L2 |
|-------------|---------------|---------------|
| loopback | 10.22.36.1/32 | 10.22.36.2/32 |

